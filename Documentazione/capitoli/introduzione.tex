\phantomsection
%\addcontentsline{toc}{chapter}{Introduzione}
\chapter{Introduzione}
\markboth{Introduzione}{}
% [titolo ridotto se non ci dovesse stare] {titolo completo}
\begin{citazione}
    In questo capitolo verrà introdotto il mondo dell'automotive con relative problematiche di sicurezza riscontrate e verrà illustrata la composizione del presente elaborato
\end{citazione}

\section{Introduzione al mondo \emph{Automotive}}
Oggigiorno il settore automobilistico è sempre più in crescita e sempre più innovativo, grazie al lavoro continuo di ingegneri e ricercatori con lo scopo di rendere i motori sempre più efficienti ed ecosostenibili e rendere la guida dei veicoli sempre più confortevole e sicura. Uno dei motivi per cui è stato possibile raggiungere questi traguardi è stata l'introduzione di \emph{dispositivi elettronici} (anche definiti \emph{sistemi embedded}) all'interno delle automobili \cite{auto_electronics}, grazie ai quali è possibile realizzare moltissimi controlli e assistenze alla guida (alcuni in maniera del tutto automatica) ed è possibile garantire un comfort più elevato a guidatore e passeggeri.\\
I componenti elettronici che si occupano del controllo di tutti questi sistemi sono chiamati \textbf{centraline} o \textbf{ECU} (\emph{Electronic Control Unit}), che saranno più o meno sofisticate in base allo scopo a cui devono assolvere e al sistema che devono gestire. Quest'ultime sono le parti più importanti di un singolo sistema e in media, in un'automobile moderna, si possono trovare dalle 40 alle 100 \emph{ECU} installate all'interno di una singola auto \cite{auto_electronics}.

Tutte queste \emph{ECU}, in base al ruolo che ricoprono e al sistema che controllano, di solito vengono raggruppate in 4 sottosistemi:
\begin{enumerate}
    \item Propulsione (\textbf{powertrain}), ovvero la gestione di motore, trasmissione, ruote, ecc. Le \emph{ECU} in questo sottosistema di solito sono responsabili del controllo dell'iniziezione di carburante, tracciamento e ottimizzazione di coppia motrice, flusso dell'olio, pressione interna dei cilindri, emissioni, ecc.
    \item Telaio (\textbf{Chassis}), ovvero la gestione dell'impianto frenante, delle sospensioni e dello sterzo. In questo sottosistema le \emph{ECU} sono responsabili della gestione di meccanismi come \emph{ABS} (Anti-lock Braking System), frenata assistita, distribuzione della forza frenante (\emph{EBD} o Electronic Brakeforce Distribution), ecc.
    \item Abitacolo (\textbf{Body}), ovvero il controllo di componenti per il comfort dei passeggeri e del guidatore, come il climatizzatore, il cruise-control, i fari automatici, la regolazione elettronica dei sedili, ecc.
    \item \textbf{Infotainment}, ovvero un'interfaccia che facilita l'interazione tra persone e automobile. Alcune delle funzionalità che di solito offre un sistema di infotainment sono la connessione WiFi/Bluetooth con smartphone per la riproduzione di contenuti o, con sistemi molto più avanzati, una diagnostica in tempo reale dell'automobile (anche da remoto) grazie all'intercomunicazione con gli altri sottosistemi. \cite{huang_2019_invehicle}
\end{enumerate}

Per realizzare tutti questi sistemi, ovviamente, tutte le \emph{ECU} non possono lavorare in maniera indipendente ma hanno bisogno di comunicare tra di loro per ottenere ed inviare informazioni utili. A questo proposito, sono stati ideati vari protocolli di comunicazione, che differiscono in prestazioni e tipologia di mezzo di comunicazione (\emph{wired} o \emph{wireless}) in base alle esigenze, per permettere l'interconnesione di più \emph{ECU}. Alcuni dei protocolli \emph{wired} più diffusi sono:
\begin{itemize}
    \item \textbf{CAN} (Controller Area Network), il più diffuso nei sistemi \textbf{powertrain}, \textbf{chassis} e \textbf{body} per via della sua tolleranza agli errori, per il suo basso costo e per la sua semplicità di realizzazione.
    \item \textbf{FlexRay}, anch'esso diffuso nei sistemi \textbf{powertrain}, \textbf{chassis} e \textbf{body} come valida alternativa di \emph{CAN} per via della sua affidabilità e della sua larghezza di banda più elevata. Grazie alla sua affidabilità e alle sue prestazioni, può essere utilizzato in sistemi avanzati come \emph{brake-by-wire}, \emph{Adaptive Cruise-control}, ecc. 
    \item \textbf{LIN} (Local Interconnect Network), molto diffuso nei sistemi \textbf{body} dove le prestazioni e la resilienza di \emph{CAN} non sono necessarie. Di solito è utilizzato in sistemi come l'apertura e chiusura elettronica delle porte e finestrini, la regolazione automatica della temperatura, l'accensione automatica delle luci, ecc; \cite{vinodhkumar_2014_automotive}
    \item \textbf{MOST} (Media Oriented System Transport), protocollo molto diffuso nei sistemi \textbf{infotainment}. Permette il raggiungimento di una largezza di banda di 50 Mb/s e, con una topologia ad anello, è in grado di collegare fino a 64 dispositivi \emph{MOST}. Tuttavia, nonostante le sue prestazioni, il costo di realizzazione di una rete \emph{MOST} è estremamente dispendioso ed è quindi utilizzato solo per realizzare collegamenti video e, in generale, per collegare telecamere installate nell'automobile. \cite{huang_2019_invehicle}
\end{itemize}


\section{Introduzione al problema}
Tutti questi protocolli focalizzano la propria attenzione sulla resilienza e sulle prestazioni, con il fine di garantire il corretto funzionamento di tutto l'equipaggiamento e di garantire l'incolumità (per quanto possibile) del guidatore e dei passeggeri. Inoltre, la semplicità di alcuni di questi protocolli permette anche di avere cablaggi più semplici e di utilizzare tecnologie meno costose per sistemi non \textbf{safety-critical}, abbattendo drasticamente i costi di produzione di un'automobile. Infatti, sicuramente non è necessario utilizzare un protocollo come \emph{MOST}, il quale mette a disposizione larghezza di banda molto elevata e latenze molto basse, per gestire il climatizzatore ma ha molto più senso utilizzare un protocollo con meno prestazioni come \emph{LIN}, il quale richiede costi molto più bassi.\\
Tuttavia, al fine di garantire queste caratteristiche (per ovvie ragioni), nel tempo sono stati trascurati quasi del tutto gli aspetti riguardo la \textbf{sicurezza} dei protocolli, lasciando spazio solo ed eslusivamente alla \textbf{safety}. Questo, purtroppo, non per negligenza da parte di chi li ha realizzati ma perchè nel periodo in cui sono nati la \textbf{security} non era un aspetto importante da tenere in considerazione nel mondo \emph{Automotive}. Ad esempio, il protocollo \emph{CAN} è nato negli anni '80 e inizialmente la rete \emph{CAN} realizzata all'interno delle automobili doveva essere completamente isolata dal mondo esterno, per cui non era necessario prendere provvedimenti a riguardo. Però, per via dei cambiamenti nell'industria automobilistica che sono avvenuti nel tempo, si è cominciato a fornire l'accesso alla rete agli utenti finali (e quindi a molte delle \emph{ECU} installate) per fini prevalentemente diagnostici, come ad'esempio l'utilizzo di \emph{OBD} (On-Board Diagnostic) per rilevare con molta facilità eventuali guasti all'automobile, per rilevare consumi anomali, ecc. \cite{bozdal_samie_jennions_2018}

Il problema di fondo di questi protocolli, quindi, è la mancanza di meccanismi di autenticazione e cifratura che impediscano ad un attaccante di inserirsi nella rete ed effettuare attacchi. Sebbene in molti casi l'attaccante deve avere accesso fisico all'automobile per effettuare un attacco, in uno scenario \emph{V2X} (Vehicle To Everything) dove l'automobile è connessa ad altre auto o addirittura ad Internet, un attaccante potrebbe essere in grado di lanciare attacchi comodamente da remoto senza nemmeno un accesso fisico all'automobile, sollevando quindi la necessità di correre ai ripari. Prendendo come riferimento il protocollo \emph{CAN}, gli attacchi possono essere suddivisi in tre categorie:
\begin{itemize}
    \item \textbf{Eavesdropping}: vista l'assenza di meccanismi di cifratura, l'attaccante si mette in ascolto passivo sulla rete per recuperare informazioni utili ad identificare i passeggeri (con conseguente violazione della privacy) analizzando eventuali cominicazioni con smartphone connessi o analizzando, ad esempio, il sensore collegato al pedale del freno. \cite{bozdal_samie_jennions_2018}. È possibile anche utilizzare questo tipo di attacchi per individuare gli identificativi dei messaggi utilizzati nello specifico modello e revisione dell'automobile per poi realizzare un attacco attivo.
    \item \textbf{Data Insertion}: vista l'assenza di meccasmi di autenticazione, l'attaccante può iniettare nella rete dei pacchetti \emph{CAN} non autorizzati alterando il corretto funzionamento della strumentazione oppure generando comportamenti inattesi. È possibile mostrare dati del motore errati (RPM non reali), livello di carburante errato o una velocità alterata, è possibile causare l'accensione o lo spegnimento del motore, apertura e chiusura delle portiere e, con auto più moderne, è possibile persino attivare i freni senza la pressione del pedale o, peggio, prevenire l'attivazione dei freni alla pressione del pedale.
    \item \textbf{Denial of Service}: l'attaccante invia pacchetti malformati o incompleti per cercare di saturare la rete o solo alcune \emph{ECU}. Forgiando pacchetti errati o alterando i pacchetti inviati da altri, è possibile persino sfruttare un meccanismo di \emph{CAN} dove una \emph{ECU} che invia molti pacchetti errati viene completamente disattivata per evitare che disturbi la rete. \cite{bozdal_samie_jennions_2018}
\end{itemize}

Sfortunatamente, si può notare come l'assenza di ogni tipo di requisito di sicurezza ha portato ad un protocollo che è diventato uno standard nel mondo \emph{Automotive} ma che è attaccabile in maniera estremamente semplice. In letteratura sono stati effettuati vari tentativi per mettere in sicurezza il protocollo ma, essendo che non è stato pensato per essere sicuro, i metodi proposti hanno introdotto latenze che non sono accettabili per sistemi \textbf{safety-critical}. \cite{bozdal_samie_jennions_2018}

\section{Obiettivi del lavoro svolto} %\label{1sec:scopo}
L'obiettivo del lavoro svolto è stato quello di proporre un metodo alternativo alla messa in sicurezza del protocollo \emph{CAN} valutandone le prestazioni, introducendo uno strato di sicurezza basato su primitive crittografiche avanzate appartenenti alla categoria \textbf{Post-Quantum Cryptography}, ovvero quelle primitive crittografiche che sono state realizzate con l'obiettivo di resistere all'attacco di un elaboratore quantistico \cite{wikipedia_pqc}. Inoltre, in sinergia con l'introduzione delle primitive crittografiche citate, è stato realizzato un "protocollo" che permettesse l'identificazione delle \emph{ECU} durante la trasmissione (essendo una rete broadcast non è stato previsto un metodo di identificazione) e che permettesse lo scambio di materiale crittografico all'avviamento del motore e a richiesta durante una sessione di guida. \\
Ovviamente, l'introduzione della cifratura e di "messaggi aggiuntivi" introduce ritardi che, anche se nell'ordine dei microsecondi, non sono trascurabili e devono essere valutati attentamente in una fase di validazione finale.

\section{Struttura della tesi}
Il presente lavoro è stato organizzato come segue:
\begin{enumerate}
    \item Una panoramica sui principali protocolli utilizzati nel mondo \emph{Automotive} con successivo confronto tra questi per evidenziare pro e contro e comprendere quando utilizzarne uno piuttosto che un altro;
    \item Una panoramica sulla parte di cifratura interessata dal lavoro svolto, in particolare sulla crittografia \textbf{Post-Quantum} e su \emph{AES}, evidenziando anche il motivo per cui sono necessari entrambi;
    \item Un'esposizione del lavoro \emph{pratico} svolto, illustrando dettagli implementativi, strumenti utilizzati e risultati ottenuti;
    \item Un capitolo conclusivo dove verranno evidenziate alcune delle possibili migliorie che possono essere apportate al lavoro per migliorare i tempi ed eventuali sviluppi futuri del lavoro effettuato.
\end{enumerate}